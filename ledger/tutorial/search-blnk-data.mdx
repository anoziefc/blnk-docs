---
title: Search your Blnk data
description: Look up anything in your Blnk Ledger
---
### Overview

You can use "Search" to retrieve any data — ledgers, balances, and transactions — from your Blnk Ledger in a fully customizable manner. With "Search", you can efficiently display data in your application, easily track balances and transactions, filter specific information needed from your ledger for investigation, etc.

This guide contains everything you need to know about using "Search."

### Getting started

"Search" supports both `GET` and `POST` HTTP methods offering you flexibility in conducting searches based on the complexity of the query.

- Use `GET` for simple searches, sending parameters in the URL.
- Use `POST` for complex queries, sending parameters in the request body.

<Steps>
	<Step title="Call the 'Search' endpoint URL">
		Here is the endpoint: `/search/:collection`.
		
		`:collection` refers to the collection of data you want to search. There are 3 data collections in the Blnk Ledger:
		
		1. Ledgers (`/search/ledgers/`)
		2. Balances (`/search/balances/`)
		3. Transactions (`/search/transactions/`)
	</Step>
	<Step title="Input your search query">
		Replace the `:collection` placeholder with your search query. See `GET` and `POST` examples of a payload searching the balances data collection:
		
		```http GET
		GET https://api.blnkserver.xyz/search/transactions?q=NGN&filter=balance>1000&sort=-created_at&page=1&per_page=10
		```
		```json POST
		{
		  "q": "NGN",
		  "filter": "balance>1000",
		  "sort": "-created_at",
		  "page": 1,
		  "per_page": 10
		}
		```
		
		| Field | Description | Required? | Type | Example
		| --- | --- | --- | --- | ---
		| `q` | The search query, looking for matches in your data | Yes | `string` | `q=NGN` searches for balances in "NGN"
		| `filter` | Narrows down the results based on specific conditions | No | `string` | `balance>1000` filters results to only include those with balances greater than 1000
		| `sort` | Specifies the order of the search results | No | `string` | `sort=-created_at` orders results by the `created_at` field in descending order. Omit "-" to display in ascending order.
		| `page` | Selects the page number of the search results | No | `int64` | `page=1` fetches the first page of the results.
		| `per_page` | Specifies the number of results per page | No | `int64` | `per_page=10` limits the number of results to 10 per page.
	</Step>
	<Step title="You're good to go!">
		Blnk processes your search query and the results are presented you in the following response format.
		
		```json response
		{
		  "found": 2,
		  "hits": [
		    {
			    "document":{
				    "balance_id": "bln_0be360ca-86fe-457d-be43-daa3f966d8f0",
				    "balance": 3000,
				    "credit_balance": 5000,
				    "debit_balance": 2000,
				    "currency": "NGN",
				    "precision": 100,
				    "ledger_id": "ldg_073f7ffe-9dfd-42ce-aa50-d1dca1788adc",
				    "created_at": "2024-02-20 05:28:03 UTC",
				}
			},
			{
			    "document":{
				    "balance_id": "bln_06756vf-86fe-457d-be43-daa3f97fhg57",
				    "balance": 40000,
				    "credit_balance": 45000,
				    "debit_balance": 5000,
				    "currency": "NGN",
				    "precision": 100,
				    "ledger_id": "ldg_073f7ffe-9dfd-42ce-aa50-d1dca1788adc",
				    "created_at": "2024-01-13 13:30:03 UTC",
				}
			}
		  ]
		}
		```
		
		| Field | Description | Type
		| --- | --- | ---
		| `found` | Indicates the total number of documents found | `int64`
		| `hits` | Contains an array of individual search results. Each object represents a document that matches the search query | `array`
		| `document` | Represents a single piece of data that matches the search query | `object`
		
		<Note>The fields inside the `document` object will match the same fields that make up the respective data collection you specified.</Note>
	</Step>
</Steps>

### Understanding search query

**Structure and terminology**

A query `clause` consists of a `field` followed by an `operator` and then a `value`.

| Terms | |  | |  | |  | |  | | Example
| --- | --- | --- | ---| ---| ---| ---| ---| ---| ---| ---
| clause | | | |  | |  | |  | |  `"q": "NGN"`
| field | | | |  | |  | |  | | `"q"`
| operator | | | |  | |  | |  | |  `:` or `=`
| value | |  | |  | |  | |  | | "`NGN`"

When using `GET`, you use `=` as the operator; you also combine multiple query clauses together by using `&`. 

For example, `GET /search/transactions?q=NGN&filter=status:applied` matches transaction records where `NGN` is found and also has an `APPLIED` status. 

With the `POST` method, you use `:` as the operator; the same search query now looks like this:

```json POST
{
	"q": "NGN",
	"filter": "status=applied"
}
```
####

**Value types and operators**

To do more with the `value` part of your search query, you can use `:`, `=`, `<` or `>` to further specify your search conditions. For example: 

| Query clause | Meaning
| --- | ---
| `"filter":"status=applied"` | Filters results down to documents with `status` fields containing `APPLIED` as its value.
| `"filter":"created_at<2024-02-24` | Filters results to documents created before Feb 2, 2024.

Every `value` includes a type that defines the kind of operations you can use. For example, while you can use `>` for values containing `amount` or `created_at`, you cannot use it for values containing `status`.

####

**Quotes**

You must always use quotation marks around string values in your query. You can omit them for numerical values.

- `"q": "NGN"` means quotes are required because "NGN" is a string value.
- `"per_page": 50` doesn't need quotes because it is a numerical value.

### Supported operators

You can expand your search query by using to include several variations of your data in the `value`. The following table lists the supported operators that you can use to do this:

| Operators | Name | Description | Example
| --- | --- | --- | ---
| `=` | Equal to |Exact match. Finds a document where a field matches the specified value | `"filter": "status=applied"` 
| `>` | Greater than | Used to find documents where a field's value is greater than the specified value. | `"filter": "balance>1000"`
| `<` | Less than | Used to find documents where a field's value is less than the specified value. | `"filter": "balance<1000"`
| `>=` | Greater than or equal to | Used to find documents where a field's value is the exact match of or greater than the specified value. | `"filter": "balance>=1000"`
| `<=` | Less than or equal to | Used to find documents where a field's value is the exact match of or less than the specified value. | `"filter": "balance<=1000"`
| AND | Logical AND | Used to combine multiple conditions that must all be true. | `"filter": "status=applied AND balance>1000"`
| OR | Logical OR | Used to combine multiple conditions where at least one must be true. | `"filter": "status=applied OR status=queued"`
| NOT | Logical NOT | Used to exclude documents that match a certain condition. | `"filter": "NOT(status=applied)"`
| IN | | Used to find documents where a field's value matches one of the specified list of values | `"filter": "status IN (applied, queued)"`
| NOT IN | | Used to exclude documents where a field's value matches one of the specified list of values | `"filter": "status NOT IN (queued, rejected)"`
| LIKE | Pattern matching | Used to find documents where a field's value contains the specified field's value | `"filter": "name LIKE %John%"` returns all documents where the substring, "John", is found anywhere within it's `name` field.
| BETWEEN | | Used to find documents where a field's value is between two specified values. | `"filter": "balance BETWEEN 1000 AND 50000"`

### Supported parameters for each collection

The parameters you can specify in the `value` part of your [query clause](#understanding-search-query) are determined byt the collection you are searching in. 

There are three data collections in the current version of the Blnk Ledger — ledgers, balances, and transactions.

**For ledgers**

| Parameters | | | | | | | | | Sample usage
| --- | --- | ---| ---| ---| ---| ---| ---| ---| ---
| name | | | | | | | | | `name LIKE %Wallets%`
| ledger_id | | | | | | | | | `ledger_id = ldg_073f7ffe-9dfd-42ce-aa50-d1dca1788adc`
| created_at | | | | | | | | | `created_at < 2024-20-01`

####

**For balances**

| Parameters | | | | | | | | | Sample usage
| --- | --- | ---| ---| ---| ---| ---| ---| ---| ---
| name | | | | | | | | | `name LIKE %Wallets%`
| balance_id | | | | | | | | | `balance_id = bln_0be360ca-86fe-457d-be43-daa3f966d8f0`
| balance | | | | | | | | | `balance BETWEEN 100 AND 100000 `
| credit_balance | | | | | | | | | `credit_balance > 100000 `
| debit_balance | | | | | | | | | `debit_balance > 2000000 `
| currency | | | | | | | | | `currency IN (NGN, USD, EUR)`
| precision | | | | | | | | | `precision = 100 `
| ledger_id | | | | | | | | | `ledger_id = ldg_073f7ffe-9dfd-42ce-aa50-d1dca1788adc`
| created_at | | | | | | | | | `created_at < 2024-20-01`

####

**For transactions**

| Parameters | | | | | | | | | Sample usage
| --- | --- | ---| ---| ---| ---| ---| ---| ---| ---
| id | | | | | | | | | `id = txn_6164573b-6cc8-45a4-ad2e-7b4ba6a60f7d`
| source | | | | | | | | | `source = bln_0be360ca-86fe-457d-be43-daa3f966d8f0`
| destination | | | | | | | | | `destination = bln_0be360ca-86fe-457d-be43-daa3f966d8f0`
| reference | | | | | | | | | `reference = ref_001adcfgf`
| amount | | | | | | | | | `amount BETWEEN 2000 AND 100000 `
| currency | | | | | | | | | `currency IN (NGN, USD, EUR)`
| description | | | | | | | | | `description LIKE %Fees% `
| status | | | | | | | | | `status IN (applied, queued)`
| created_at | | | | | | | | | `created_at < 2024-20-01`
| scheduled_for | | | | | | | | | `scheduled_for > 2024-20-01`
| allow_over_draft | | | | | | | | | `NOT (allow_over_draft = true)`
| inflight | | | | | | | | | `inflight = true`

****

### Sections remaining to write

- Understanding search query
	- Query structure
	- Search fields
	- Quotes for strings. No quotes for integers
	- Search syntax
- Supported operations
- Examples
	- Transaction lookup
	- Balance lookup
	- View ALL transactions belonging to a balance
	- View all balances in a ledger
	- View all balances with a particular asset class
	- Filter transactions above 10000 in a balance
	- View all balances with balance above 500000
	- View all balances with in a particular ledger with an overdraft
	- View applied transactions between date A and B for a particular balance.
	- View all transactions that's happened in the past 7 days
- Supported query fields for each collection
	- for ledgers
	- for balances
	- for transactions
- Things to consider
	- Processing time
	- Data freshness

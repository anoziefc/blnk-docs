---
title: Search your Blnk data
description: Look up anything in your Blnk Ledger
---
## Overview

You can use "Search" to retrieve any data — ledgers, balances, and transactions — from your Blnk Ledger in a fully customizable manner. With "Search", you can efficiently display data in your application, easily track balances and transactions, filter specific information needed from your ledger for investigation, etc.

This guide contains everything you need to know about using "Search."

## Getting started

"Search" supports both `GET` and `POST` HTTP methods offering you flexibility in conducting searches based on the complexity of the query.

- Use `GET` for simple searches, sending parameters in the URL.
- Use `POST` for complex queries, sending parameters in the request body.

<Steps>
	<Step title="Call the 'Search' endpoint URL">
		Here is the endpoint: `/search/:collection`.
		
		`:collection` refers to the collection of data you want to search. There are 3 data collections in the Blnk Ledger:
		
		1. Ledgers (`/search/ledgers/`)
		2. Balances (`/search/balances/`)
		3. Transactions (`/search/transactions/`)
	</Step>
	<Step title="Input your search query">
		Replace the `:collection` placeholder with your search query. See `GET` and `POST` examples of a payload searching the balances data collection:
		
		```http GET
		GET https://api.blnkserver.xyz/search/transactions?q=NGN&filter=balance>1000&sort=-created_at&page=1&per_page=10
		```
		```json POST
		{
		  "q": "NGN",
		  "filter": "balance>1000",
		  "sort": "-created_at",
		  "page": 1,
		  "per_page": 10
		}
		```
		
		| Field | Description | Required? | Type | Example
		| --- | --- | --- | --- | ---
		| `q` | The search query, looking for matches in your data | Yes | `string` | `q=NGN` searches for balances in "NGN"
		| `filter` | Narrows down the results based on specific conditions | No | `string` | `balance>1000` filters results to only include those with balances greater than 1000
		| `sort` | Specifies the order of the search results | No | `string` | `sort=-created_at` orders results by the `created_at` field in descending order. Omit "-" to display in ascending order.
		| `page` | Selects the page number of the search results | No | `int64` | `page=1` fetches the first page of the results.
		| `per_page` | Specifies the number of results per page | No | `int64` | `per_page=10` limits the number of results to 10 per page.
	</Step>
	<Step title="You're good to go!">
		Blnk processes your search query and the results are presented you in the following response format.
		
		```json response
		{
		  "found": 2,
		  "hits": [
		    {
			    "document":{
				    "balance_id": "bln_0be360ca-86fe-457d-be43-daa3f966d8f0",
				    "balance": 3000,
				    "credit_balance": 5000,
				    "debit_balance": 2000,
				    "currency": "NGN",
				    "precision": 100,
				    "ledger_id": "ldg_073f7ffe-9dfd-42ce-aa50-d1dca1788adc",
				    "created_at": "2024-02-20 05:28:03 UTC",
				}
			},
			{
			    "document":{
				    "balance_id": "bln_06756vf-86fe-457d-be43-daa3f97fhg57",
				    "balance": 40000,
				    "credit_balance": 45000,
				    "debit_balance": 5000,
				    "currency": "NGN",
				    "precision": 100,
				    "ledger_id": "ldg_073f7ffe-9dfd-42ce-aa50-d1dca1788adc",
				    "created_at": "2024-01-13 13:30:03 UTC",
				}
			}
		  ]
		}
		```
		
		| Field | Description | Type
		| --- | --- | ---
		| `found` | Indicates the total number of documents found | `int64`
		| `hits` | Contains an array of individual search results. Each object represents a document that matches the search query | `array`
		| `document` | Represents a single piece of data that matches the search query | `object`
		
		<Note>The fields inside the `document` object will match the same fields that make up the respective data collection you specified.</Note>
	</Step>
</Steps>

## Understanding search query

#### Structure and terminology

A query `clause` consists of a `field` followed by an `operator` and then a `value`.

| Terms | |  | |  | |  | |  | | Example
| --- | --- | --- | ---| ---| ---| ---| ---| ---| ---| ---
| clause | | | |  | |  | |  | |  `"q": "NGN"`
| field | | | |  | |  | |  | | `"q"`
| operator | | | |  | |  | |  | |  `:` or `=`
| value | |  | |  | |  | |  | | "`NGN`"

When using `GET`, you use `=` as the operator; you also combine multiple query clauses together by using `&`. 

For example, `GET /search/transactions?q=NGN&filter=status:applied` matches transaction records where `NGN` is found and also has an `APPLIED` status. 

With the `POST` method, you use `:` as the operator; the same search query now looks like this:

```json POST
{
	"q": "NGN",
	"filter": "status=applied"
}
```

#### Value types and operators

To do more with the `value` part of your search query, you can use `:`, `=`, `<` or `>` to further specify your search conditions. For example: 

| Query clause | Meaning
| --- | ---
| `"filter":"status=applied"` | Filters results down to documents with `status` fields containing `APPLIED` as its value.
| `"filter":"created_at<2024-02-24` | Filters results to documents created before Feb 2, 2024.

Every `value` includes a type that defines the kind of operations you can use. For example, while you can use `>` for values containing `amount` or `created_at`, you cannot use it for values containing `status`.

#### Quotes

You must always use quotation marks around string values in your query. You can omit them for numerical values.

- `"q": "NGN"` means quotes are required because "NGN" is a string value.
- `"per_page": 50` doesn't need quotes because it is a numerical value.

## Supported operators

You can expand your search query by using to include several variations of your data in the `value`. The following table lists the supported operators that you can use to do this:

| Operators | Name | Description | Example
| --- | --- | --- | ---
| `=` | Equal to |Exact match. Finds a document where a field matches the specified value | `"filter": "status=applied"` 
| `>` | Greater than | Used to find documents where a field's value is greater than the specified value. | `"filter": "balance>1000"`
| `<` | Less than | Used to find documents where a field's value is less than the specified value. | `"filter": "balance<1000"`
| `>=` | Greater than or equal to | Used to find documents where a field's value is the exact match of or greater than the specified value. | `"filter": "balance>=1000"`
| `<=` | Less than or equal to | Used to find documents where a field's value is the exact match of or less than the specified value. | `"filter": "balance<=1000"`
| AND | Logical AND | Used to combine multiple conditions that must all be true. | `"filter": "status=applied AND balance>1000"`
| OR | Logical OR | Used to combine multiple conditions where at least one must be true. | `"filter": "status=applied OR status=queued"`
| NOT | Logical NOT | Used to exclude documents that match a certain condition. | `"filter": "NOT(status=applied)"`
| IN | | Used to find documents where a field's value matches one of the specified list of values | `"filter": "status IN (applied, queued)"`
| NOT IN | | Used to exclude documents where a field's value matches one of the specified list of values | `"filter": "status NOT IN (queued, rejected)"`
| LIKE | Pattern matching | Used to find documents where a field's value contains the specified field's value | `"filter": "name LIKE %John%"` returns all documents where the substring, "John", is found anywhere within it's `name` field.
| BETWEEN | | Used to find documents where a field's value is between two specified values. | `"filter": "balance BETWEEN 1000 AND 50000"`

## Supported parameters for each collection

The parameters you can specify in the `value` part of your [query clause](#understanding-search-query) are determined byt the collection you are searching in. 

There are three data collections in the current version of the Blnk Ledger — ledgers, balances, and transactions.

#### For ledgers

| Parameters | | | | | | | | | Sample usage
| --- | --- | ---| ---| ---| ---| ---| ---| ---| ---
| name | | | | | | | | | `name LIKE %Wallets%`
| ledger_id | | | | | | | | | `ledger_id = ldg_073f7ffe-9dfd-42ce-aa50-d1dca1788adc`
| created_at | | | | | | | | | `created_at < 2024-20-01`

#### For balances

| Parameters | | | | | | | | | Sample usage
| --- | --- | ---| ---| ---| ---| ---| ---| ---| ---
| balance_id | | | | | | | | | `balance_id = bln_0be360ca-86fe-457d-be43-daa3f966d8f0`
| balance | | | | | | | | | `balance BETWEEN 100 AND 100000 `
| credit_balance | | | | | | | | | `credit_balance > 100000 `
| debit_balance | | | | | | | | | `debit_balance > 2000000 `
| currency | | | | | | | | | `currency IN (NGN, USD, EUR)`
| precision | | | | | | | | | `precision = 100 `
| ledger_id | | | | | | | | | `ledger_id = ldg_073f7ffe-9dfd-42ce-aa50-d1dca1788adc`
| created_at | | | | | | | | | `created_at < 2024-20-01`

#### For transactions

| Parameters | | | | | | | | | Sample usage
| --- | --- | ---| ---| ---| ---| ---| ---| ---| ---
| id | | | | | | | | | `id = txn_6164573b-6cc8-45a4-ad2e-7b4ba6a60f7d`
| source | | | | | | | | | `source = bln_0be360ca-86fe-457d-be43-daa3f966d8f0`
| destination | | | | | | | | | `destination = bln_0be360ca-86fe-457d-be43-daa3f966d8f0`
| reference | | | | | | | | | `reference = ref_001adcfgf`
| amount | | | | | | | | | `amount BETWEEN 2000 AND 100000 `
| currency | | | | | | | | | `currency IN (NGN, USD, EUR)`
| description | | | | | | | | | `description LIKE %Fees% `
| status | | | | | | | | | `status IN (applied, queued)`
| created_at | | | | | | | | | `created_at < 2024-20-01`
| scheduled_for | | | | | | | | | `scheduled_for > 2024-20-01`
| allow_over_draft | | | | | | | | | `NOT (allow_over_draft = true)`
| inflight | | | | | | | | | `inflight = true`

## Things to consider
#### Processing time

The time it takes to process a search query may vary depending on the kind and complexity of your search query. For workflows where you need to display values in real-time like balances or a specific transaction details, used the `GET by id` endpoints specific to the collection you are searching for.

#### Data freshness

It is advisable not to use read-after-write flows (for example, searching immediately after a transaction request has been made) because the data may not be available immediately to search. Under normal conditions, data is searchable within seconds, but propagation of new or updated data could be delayed due to unforeseen circumstances.

## Common examples
#### Transaction lookup

Search for the details of a particular transaction.

```http request
{
	POST /search/transactions 
	Content-Type: application/json
	
	"q": "txn_6164573b-6cc8-45a4-ad2e-7b4ba6a60f7d"
}
```

#### Balance lookup

Search for the details of a particular balance.

```http request
{
	POST /search/balances 
	Content-Type: application/json
	
	"q": "bln_ebcd230f-6265-4d4a-a4ca-45974c47f746"
}
```

#### View all transactions belonging to a balance

Search for all transactions that a particular balance has been a part of either as a source or destination. If `source`, it is a debit; if `destination`, it is a credit.

<Tip>Adding `-` in front of the specified value sorts the results in descending order, i.e., from latest to earliest. To sort it in ascending order, omit the `-`.</Tip>

The sample query below sorts the result in descending order and paginates the results, displaying 30 records per page.

```http request
{
	POST /search/transactions 
	Content-Type: application/json
	
	"q": "NGN",
	"filter": "source=bln_ebcd230f-6265-4d4a-a4ca-45974c47f746 OR destination=bln_ebcd230f-6265-4d4a-a4ca-45974c47f746",
	"sort": "-created_at",
	"page": 1,
	"per_page": 30
}
```

#### View all balances in a ledger

Search for all balances grouped in a particular ledger.

Include the `ledger_id` as the primary search query to provide all balance records that exactly matches the specified value.

```http request
{
	POST /search/balances 
	Content-Type: application/json
	
	"q": "ldg_073f7ffe-9dfd-42ce-aa50-d1dca1788adc"
}
```

#### View all balances with a specific asset class

Search for all balances with a specific asset class (e.g., NGN). 

```http request
{
	POST /search/balances 
	Content-Type: application/json
	
	"q": "NGN"
}
```

#### View all balances with total balance above NGN 400,000

Search for all balances with their total balance above NGN 400,000. 

- Input the asset class (NGN) as the primary search query, `q`. This matches all balance records that contain "NGN" in their details.
- Filter by total balance, `balance`. This filters the search results to only balances with over NGN 400,000. 
<Warning>
	All balances are converted into their smallest unit using your [balance precision value](/ledger/tutorial/precision). 
	
	Make sure to convert the balance specified value with your precision before adding it to your query to get the correct results. 
</Warning>

```http request
{
	POST /search/balances 
	Content-Type: application/json
	
	"q": "NGN",
	"filter": "balance>40000000"
}
```

#### View all balances with an overdraft within a specified ledger

Search for all balances with an overdraft (i.e. a negative balance value).

Using the `ledger_id` as the primary query would match all balance records containing the specified value. A negative is any number that is less than 0. You can filter these balance records by looking for balances whose values are less than 0.

```http request
{
	POST /search/balances 
	Content-Type: application/json
	
	"q": "ldg_073f7ffe-9dfd-42ce-aa50-d1dca1788adc",
	"filter": "balance<0"
}
```

#### View credit transactions below NGN 100,000 in a specified balance

Search for transactions where a specified balance received amounts less than NGN 100,000.

<Tip>
	Use `per_page` to introduce pagination into your results, while `page` helps you navigate them. 
	
	This is good for large results because it returns them faster when it is fetched in groups (pages) compared to when it tries to fetch them all at once.
</Tip>

```http request
{
	POST /search/transactions 
	Content-Type: application/json
	
	"q": "NGN",
	"filter": "status=applied AND amount<10000000 AND destination=bln_ebcd230f-6265-4d4a-a4ca-45974c47f746",
	"sort": "-created_at",
	"page": 1,
	"per_page": 50,
}
```

#### View all `APPLIED` transactions between two dates in a specified balance

View all transactions with `"status": "APPLIED"` between February 2 and March 28, 2024 in a specified balance.

```http request
{
	POST /search/transactions 
	Content-Type: application/json
	
	"q": "bln_ebcd230f-6265-4d4a-a4ca-45974c47f746",
	"filter": "status=applied AND (created_at BETWEEN 2024-02-02 AND 2024-03-28)"
}
```

## See also

<CardGroup>
	<Card title="How internal ledgers work" icon="book-open-cover" href="/ledger/guide/internal-ledgers">
        Learn more about `@World`
    </Card>
    <Card title="Set up your balance precision" icon="book-open-cover" href="/ledger/tutorial/precision">
        Optimize your balances with precision
    </Card>
	<Card title="Handling concurrency" icon="book-open-cover" href="/ledger/tutorial/queuing-transactions">
		How Blnk queues transactions
    </Card>
    <Card title="Managing notifications" icon="book-open-cover" href="/intro/notifications">
	    Set up how you receive notifications
    </Card>
</CardGroup>

## Need help?

Are you stuck? Do you have a question that isn't answered in this doc? Have you run into a problem you can't solve? Want to file a bug report?

[Join our Slack community](https://join.slack.com/t/blnk-ledger/shared_invite/zt-2fwdivkvm-zHW4F8lwtVsbIaPg~dyx9w) and share your questions/thoughts with other developers building financial applications like you.
